# 📘 Callia: Morning Briefings 产品需求文档（PRD）

## 📝 一、产品概述
**Callia** 是一款基于 AI 的新闻聚合应用，旨在每日从指定的新闻网站和 RSS 源中提取最新资讯，并根据用户的选择，每天生成个性化的新闻摘要，用户可以在应用中查看和分享。


## 👥 二、目标用户
* 希望获取个性化新闻摘要的用户
* 关注多个新闻源但时间有限的专业人士
* 对特定主题或领域感兴趣的读者

## 🎨 产品风格
* 自适应，多端适配。
* 现代、简洁、专业的新闻网站风格。
* 使用 Newsreader 和 Noto Sans 字体。


## 🔑 三、核心功能
### 3.1 新闻采集与处理
* **新闻网站采集**：使用 `newspaper4k` 从配置问价中国指定的新闻网站 URL 中提取最新文章，包括标题、作者、发布时间、正文、关键词和摘要等信息。
* **RSS 源解析**：使用 `feedparser` 解析配置文件中指定的 RSS URL，提取文章链接，并结合 `newspaper4k` 获取完整内容。
* **多线程下载**：利用 `newspaper4k` 的多线程功能，加快文章下载速度。
* **语言支持**：支持多语言新闻源，自动检测并处理不同语言的文章。

### 3.2 用户管理与偏好设置
* **用户注册与登录**：支持 Google 或 Email 注册和登录, 用户管理功能由 Supabase 提供。
* **新闻源选择**：用户登录后可从提供的新闻源列表中选择感兴趣的来源， 或 添加自己的新闻源。

### 3.3 个性化新闻摘要生成
* **每日摘要生成**：根据用户的新闻源选择和偏好，生成个性化的新闻摘要。
* **AI 摘要与关键词提取**：利用 `newspaper4k` 的 NLP 功能，自动提取文章摘要和关键词。
* **内容去重与排序**：对采集到的新闻进行去重处理，并根据相关性或用户偏好进行排序。

### 3.4 应用内查看新闻摘要
* **应用内查看**：用户登录后可在应用中查看每日的新闻摘要。
* **历史记录**：提供最近 30 天的新闻摘要历史记录，供用户查阅。
* **分享**：用户可将每天的新闻摘要分享到社交媒体平台。



## 🎨 四、关键页面设计

### 4.1 首页
* 展示 hero section, features section, user testimonials section, pricing section.

### 4.2 Brief 合集页面
* 展示最近 30 天的新闻摘要历史记录，用户可选择查看文本或音频格式。
* 用户可选择将单日的新闻摘要分享到社交媒体平台。

### 4.3 Brief Podcasts 页面
* 每个用户轻松变成播客主理人，打造自己的 Biref Podcast，可播放、分享， 但仅可下载自己的 Brief Podcast。
* 用户可选择将某天的 Brief 添加到自己的 Brief Podcast 中，或从自己的 Brief Podcast 中删除某天的 Brief。默认自动添加？
* 用户可以在 Preferences 中控制自己的整个 Brief Podcast 是否公开可见（默认公开可见），以及 Podcast 名称、封面图、描述等。


### 4.3 新闻信息源页面
* 分类展示官方或用户分享的新闻信息源：
  * 分为三类：官方推荐、 社区热门、 近期新增，每类展示 10 个信息源。
  * 每个信息源展示其名称、描述、信息源语言、订阅人数、最新更新时间。
  * 用户可点击信息源名称查看其详细信息。
  * 用户可点击订阅按钮订阅该信息源。
  * 用户可点击取消订阅按钮取消订阅该信息源。
* 分类展示官方或用户分享的新闻信息源：
  * 按新闻信息源录入时填写的分类字段展示每个分类下的所有信息源，分页表格展示，每页展示 10 个信息源。
  * 每个信息源展示其名称、描述、信息源语言、订阅人数、最新更新时间。
  * 用户可点击信息源名称查看其详细信息。
  * 用户可点击订阅按钮订阅该信息源。
  * 用户可点击取消订阅按钮取消订阅该信息源。

### 4.4 用户 Settings 主页
* 用户个人资料 Profile tab：展示用户个人资料。
* 用户新闻源 News Sources tab：展示用户订阅的新闻信息源，包括信息源名称、描述、信息源语言、订阅人数、最新更新时间。用户可点击信息源名称查看其详细信息；可点击取消订阅按钮取消订阅该信息源；。
* 用户 Preferences tab：展示用户偏好设置，语言选择。

### 4.5 注册与登录页面
* 支持 Google 或 Email 注册和登录。

### 4.6 订阅支付页面
* 支持 Stripe 支付。
* 支持订阅和取消订阅。



## 🧱 五、技术架构
### 5.1 前端
* **框架**：Next.js，支持服务端渲染和静态生成，提升性能和 SEO。
* **UI 库**：shadcn/ui，提供可访问、可定制的组件，便于构建一致的用户界面。
* **样式**：Tailwind CSS，快速构建响应式设计。
* **功能模块**：用户注册/登录、新闻源选择、偏好设置、Morning Brew 查看、历史记录等。

### 5.2 后端
* **语言与框架**：Python，使用 FastAPI 构建 API, 使用 uv 管理依赖和构建项目。
* **新闻采集**：`newspaper4k` 和 `feedparser`。
* **数据库**：Supabase PostgreSQL，用于存储用户信息、新闻数据和历史记录。
* **任务调度**：使用 Celery 或 APScheduler 实现每日定时任务。
* **邮件服务**：集成 SMTP 服务（如 SendGrid）发送邮件。


## 📅 六、开发计划
| 阶段    | 时间      | 任务                       |
| ----- | ------- | ------------------------ |
| 需求分析  | 第 1 周   | 明确功能需求，确定技术选型            |
| 原型设计  | 第 2 周   | 完成 UI/UX 设计，制作原型图        |
| 后端开发  | 第 3 周 | 搭建服务器，开发 API，集成新闻采集与处理模块 |
| 前端开发  | 第 4 周 | 开发用户界面，实现交互功能            |
| 测试与优化 | 第 5 周   | 进行功能测试，修复 bug，优化性能       |
| 部署上线  | 第 6 周   | 部署应用，发布上线，收集用户反馈         |


## 🚀 七、未来扩展方向
* **AI 语音对谈**：用户可与 AI 进行语音对谈，针对每天的 Morning Brew 进行讨论。
* **多平台支持**：开发移动端应用，支持 iOS 和 Android 平台。

